<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CRUD - FastAPI + Petite-Vue</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app" v-scope @vue:mounted="mounted">
    <h1>CRUD - Gerenciador de Tarefas</h1>

    <!-- Mensagens de Alerta -->
    <div v-if="message.text" :class="'alert ' + message.type">
      {{ message.text }}
    </div>

    <!-- Formulário -->
    <div class="form-container">
      <h2>{{ editingId ? 'Editar' : 'Adicionar' }} Tarefa</h2>
      <input v-model="form.titulo" placeholder="Título" required>
      <input v-model="form.descricao" placeholder="Descrição" required>
      <label>
        <input type="checkbox" v-model="form.concluido">
        Concluído
      </label>
      <div>
        <button @click="submitForm" :disabled="loading" class="btn-create">
          {{ loading ? 'Aguarde...' : (editingId ? 'Atualizar' : 'Criar') }}
        </button>
        <button v-if="editingId" @click="cancelEdit" :disabled="loading" class="btn-cancel">
          Cancelar
        </button>
      </div>
    </div>

    <!-- Lista de Tarefas -->
    <div class="items-container">
      <h2>Tarefas</h2>
      <div v-if="items.length === 0" class="empty">Nenhuma tarefa cadastrada</div>
      <div v-for="item in items" :key="item.id" class="item-card">
        <div class="item-info">
          <h3 :class="{ completed: item.concluido }">{{ item.titulo }}</h3>
          <p>{{ item.descricao }}</p>
          <span class="status">{{ item.concluido ? '✓ Concluído' : '○ Pendente' }}</span>
        </div>
        <div class="item-actions">
          <button @click="editItem(item)" class="btn-edit">Editar</button>
          <button @click="deleteItem(item.id)" class="btn-delete">Deletar</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
